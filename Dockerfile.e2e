FROM cypress/included:9.7.0

WORKDIR /e2e

COPY apps/user-office-frontend-e2e/cypress.json ./user-office-frontend-e2e/
COPY apps/user-office-frontend-e2e/package* ./user-office-frontend-e2e/
COPY apps/user-office-frontend-e2e/tsconfig.json ./user-office-frontend-e2e/tsconfig.json
COPY apps/user-office-frontend-e2e/wait-for-frontend.sh ./user-office-frontend-e2e/
COPY apps/user-office-frontend-e2e/cypress ./user-office-frontend-e2e/cypress/
COPY apps/user-office-frontend/src/generated user-office-frontend/src/generated

RUN npm ci --silent

ENTRYPOINT ["npm", "run", "cy:run"]